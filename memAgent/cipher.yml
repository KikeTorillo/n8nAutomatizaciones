# Cipher Configuration - Nexo ERP
# Memoria persistente para desarrollo con IA

# ========================================
# MCP SERVERS (opcional)
# ========================================
mcpServers: {}

# ========================================
# LLM PROVIDER - OpenRouter (via OpenAI compatible)
# ========================================
llm:
  provider: openai
  model: qwen/qwen3-32b
  baseUrl: https://openrouter.ai/api/v1
  apiKey: ${OPENAI_API_KEY}
  maxIterations: 50

# ========================================
# EMBEDDINGS - Ollama Local
# ========================================
embedding:
  type: ollama
  model: nomic-embed-text
  baseUrl: http://localhost:11434
  dimensions: 768

# ========================================
# VECTOR STORE - Qdrant (configurado via env vars)
# ========================================
# VECTOR_STORE_TYPE=qdrant
# VECTOR_STORE_URL=http://localhost:6333

# ========================================
# SYSTEM PROMPT - Contexto Nexo
# ========================================
systemPrompt:
  enabled: true
  content: |
    Eres la memoria del proyecto Nexo ERP - Sistema de Gestión Empresarial SaaS Multi-Tenant.

    CONTEXTO DEL PROYECTO:
    - Stack: React 18 + Vite (frontend), Node.js + Express (backend), PostgreSQL 17
    - Arquitectura: 10 módulos backend (core, agendamiento, inventario, eventos-digitales, contabilidad, pos, comisiones, marketplace, storage, recordatorios)
    - Seguridad: RLS multi-tenant con variable app.current_tenant_id

    REGLAS CRÍTICAS:
    1. RLS SIEMPRE: Usar RLSContextManager.query() o .transaction()
    2. asyncHandler obligatorio en todas las routes
    3. Frontend: Sanitizar "" a undefined
    4. Orden middlewares: auth.authenticateToken → tenant.setTenantContext → controller

    Tu trabajo es:
    - Almacenar información importante del proyecto
    - Recordar bugs, decisiones técnicas y patrones
    - Proporcionar contexto relevante cuando se pregunte
