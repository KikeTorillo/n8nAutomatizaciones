meta {
  name: 03-Crear-Servicio-Barba-Clasica
  type: http
  seq: 3
}

post {
  url: {{baseUrl}}/api/{{apiVersion}}/servicios
  body: json
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

body:json {
  {
    "nombre": "Arreglo de Barba Clásica",
    "descripcion": "Arreglo profesional de barba con recorte y delineado",
    "categoria": "barba",
    "subcategoria": "clasica",
    "duracion_minutos": 30,
    "precio": 15.00,
    "precio_minimo": 12.00,
    "precio_maximo": 18.00,
    "requiere_preparacion_minutos": 3,
    "tiempo_limpieza_minutos": 5,
    "max_clientes_simultaneos": 1,
    "color_servicio": "#8b4513",
    "configuracion_especifica": {
      "incluye_aceites": true,
      "incluye_toalla_caliente": true,
      "productos_naturales": true
    },
    "tags": ["clasico", "barba", "rapido"],
    "activo": true
  }
}

assert {
  res.status: eq 201
  res.body.success: eq true
  res.body.data.nombre: eq "Arreglo de Barba Clásica"
  res.body.data.precio: eq 15
  res.body.data.duracion_minutos: eq 30
  res.body.data.id: isDefined
}

script:post-response {
  if (res.body.success) {
    bru.setEnvVar("servicioBarbaId", res.body.data.id);
    console.log("✅ Servicio de barba creado con ID:", res.body.data.id);
    console.log("Nombre:", res.body.data.nombre);
    console.log("Precio:", res.body.data.precio);
  }
}