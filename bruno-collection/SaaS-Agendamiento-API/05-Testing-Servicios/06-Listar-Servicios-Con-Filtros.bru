meta {
  name: 06-Listar-Servicios-Con-Filtros
  type: http
  seq: 6
}

get {
  url: {{baseUrl}}/api/{{apiVersion}}/servicios?categoria=corte&activo=true&precio_min=20&precio_max=30&pagina=1&limite=5
  body: none
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

assert {
  res.status: eq 200
  res.body.success: eq true
  res.body.data.servicios: isArray
  res.body.data.filtros_aplicados.categoria: eq "corte"
  res.body.data.filtros_aplicados.activo: eq true
}

script:post-response {
  if (res.body.success) {
    console.log("✅ Servicios filtrados exitosamente");
    console.log("Filtros aplicados:", JSON.stringify(res.body.data.filtros_aplicados));
    console.log("Servicios encontrados:", res.body.data.servicios.length);
    res.body.data.servicios.forEach((servicio, index) => {
      console.log(`  ${index + 1}. ${servicio.nombre} - Categoría: ${servicio.categoria} - Precio: $${servicio.precio}`);
    });
  }
}