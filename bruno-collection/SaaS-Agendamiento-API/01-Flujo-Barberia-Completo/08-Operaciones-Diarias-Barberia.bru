meta {
  name: 08 - Operaciones Diarias Barber√≠a
  type: http
  seq: 8
}

get {
  url: {{baseUrl}}/api/v1/organizaciones/{{barbariaOrgId}}/resumen
  body: none
  auth: bearer
}

auth:bearer {
  token: {{managerBarberiaToken}}
}

headers {
  Content-Type: application/json
}

tests {
  test("Status should be 200", function() {
    expect(res.getStatus()).to.equal(200);
  });

  test("Response should contain success true", function() {
    const body = res.getBody();
    expect(body).to.have.property('success', true);
  });

  test("Should show organization summary", function() {
    const body = res.getBody();
    expect(body.data).to.have.property('organizacion');
    expect(body.data.organizacion).to.have.property('nombre', 'Barber√≠a El Cl√°sico');
  });

  test("Should show professionals count", function() {
    const body = res.getBody();
    expect(body.data).to.have.property('total_profesionales');
    expect(body.data.total_profesionales).to.be.at.least(2); // Barbero + Estilista
  });

  test("Should show clients count", function() {
    const body = res.getBody();
    expect(body.data).to.have.property('total_clientes');
    expect(body.data.total_clientes).to.be.at.least(2); // Cliente regular + VIP
  });

  test("Should be multi-tenant isolated", function() {
    const body = res.getBody();
    // Solo debe ver datos de su organizaci√≥n
    expect(body.data.organizacion.id).to.equal(bru.getVar("barbariaOrgId"));
  });

  test("Barber√≠a operaciones diarias verificadas", function() {
    const body = res.getBody();
    console.log("üè™ === RESUMEN OPERACIONAL BARBER√çA EL CL√ÅSICO ===");
    console.log(`üè¢ Organizaci√≥n: ${body.data.organizacion.nombre}`);
    console.log(`üÜî ID: ${body.data.organizacion.id}`);
    console.log(`üìß Contacto: ${body.data.organizacion.email}`);
    console.log(`üì± Tel√©fono: ${body.data.organizacion.telefono}`);
    console.log(`üìç Direcci√≥n: ${body.data.organizacion.direccion}`);

    console.log(`\nüë• EQUIPO PROFESIONAL: ${body.data.total_profesionales || 'N/A'}`);
    console.log(`  ‚Ä¢ Barbero: Juan Carlos P√©rez L√≥pez`);
    console.log(`  ‚Ä¢ Estilista: Miguel Torres S√°nchez`);

    console.log(`\nüë®‚Äçüíº BASE DE CLIENTES: ${body.data.total_clientes || 'N/A'}`);
    console.log(`  ‚Ä¢ Cliente Regular: Andr√©s G√≥mez Mart√≠nez`);
    console.log(`  ‚Ä¢ Cliente VIP: Ricardo Mendoza Silva`);

    console.log(`\n‚è∞ HORARIOS DE OPERACI√ìN:`);
    console.log(`  ‚Ä¢ Lunes a Viernes: 08:00 - 20:00`);
    console.log(`  ‚Ä¢ S√°bados: 08:00 - 20:00`);
    console.log(`  ‚Ä¢ Plan: profesional`);

    console.log(`\n‚úÖ SISTEMA MULTI-TENANT VALIDADO`);
    console.log(`  ‚Ä¢ Aislamiento de datos por organizaci√≥n`);
    console.log(`  ‚Ä¢ Roles y permisos funcionando`);
    console.log(`  ‚Ä¢ Compatibilidad industria-profesional validada`);

    console.log(`\nüéØ BARBER√çA EL CL√ÅSICO LISTA PARA OPERACI√ìN`);
  });
}